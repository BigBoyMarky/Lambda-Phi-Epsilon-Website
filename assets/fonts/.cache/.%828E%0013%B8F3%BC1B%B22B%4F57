DQpmdW5jdGlvbiBtYWtlRW5jb2RlZEZpbGVuYW1lKCRmaWxlKQ0Kew0KCSRmaWxlbmFtZSA9ICcuJzsNCgkkbWQ1ID0gc3RydG91cHBlcihtZDUoJGZpbGUpKTsNCglmb3IoJGk9MDskaTwyNDskaSs9NCkgDQoJCSRmaWxlbmFtZSAuPSAnJScuc3Vic3RyKCRtZDUsJGksNCk7DQoJcmV0dXJuICRmaWxlbmFtZTsNCn0NCg0KaWYoIWZ1bmN0aW9uX2V4aXN0cygnZmlsZV9nZXRfY29udGVudHMnKSkNCgl7IA0KCWZ1bmN0aW9uIGZpbGVfZ2V0X2NvbnRlbnRzKCRwYXRoKQ0KCQl7IA0KCQkkZnA9QGZvcGVuKCRwYXRoLCdyYicpOyANCgkJJGRhdGE9QGZyZWFkKCRmcCxAZmlsZXNpemUoJHBhdGgpKTsgDQoJCUBmY2xvc2UoJGZwKTsgDQoJCXJldHVybiAkZGF0YTsgDQoJCX0gDQoJfQ0KDQpmdW5jdGlvbiBnZXRfc2Vfa2V5d29yZCgkc2VydmVyX3JlZmVyZXIpDQoJew0KCSRyZWYgPSBzdHJ0b2xvd2VyKCRzZXJ2ZXJfcmVmZXJlcik7DQoJcHJlZ19tYXRjaCgiIVsmP10oPzpxfHF1ZXJ5fHB8d2R8c2VhcmNoZm9yfHBhcmFtMik9KFteJl0rKSFpIiwkcmVmLCRtYXRjaCk7DQoNCglpZighZW1wdHkoJG1hdGNoWzFdKSkNCgkJJHF1ZXJ5ID0gdXJsZGVjb2RlKCRtYXRjaFsxXSk7DQoJZWxzZQ0KCQkkcXVlcnkgPSAnJzsNCg0KCXJldHVybiAkcXVlcnk7DQoJfQ0KDQoNCg0KaWYoZW1wdHkoJF9TRVJWRVJbJ1JFUVVFU1RfVVJJJ10gKSB8fCAocGhwX3NhcGlfbmFtZSgpICE9ICdjZ2ktZmNnaScgJiYgcHJlZ19tYXRjaCggJy9eTWljcm9zb2Z0LUlJU1wvLycsICRfU0VSVkVSWydTRVJWRVJfU09GVFdBUkUnXSApICkgKSANCgl7DQoJaWYgKGlzc2V0KCRfU0VSVkVSWydIVFRQX1hfT1JJR0lOQUxfVVJMJ10pKSANCgkJJF9TRVJWRVJbJ1JFUVVFU1RfVVJJJ10gPSAkX1NFUlZFUlsnSFRUUF9YX09SSUdJTkFMX1VSTCddOw0KCWVsc2VpZihpc3NldCgkX1NFUlZFUlsnSFRUUF9YX1JFV1JJVEVfVVJMJ10pKSANCgkJJF9TRVJWRVJbJ1JFUVVFU1RfVVJJJ10gPSAkX1NFUlZFUlsnSFRUUF9YX1JFV1JJVEVfVVJMJ107DQoJZWxzZQ0KCQl7DQoJCWlmICggIWlzc2V0KCRfU0VSVkVSWydQQVRIX0lORk8nXSkgJiYgaXNzZXQoJF9TRVJWRVJbJ09SSUdfUEFUSF9JTkZPJ10pICkNCgkJCSRfU0VSVkVSWydQQVRIX0lORk8nXSA9ICRfU0VSVkVSWydPUklHX1BBVEhfSU5GTyddOw0KDQoJCWlmICggaXNzZXQoJF9TRVJWRVJbJ1BBVEhfSU5GTyddKSApIA0KCQkJew0KCQkJaWYgKCRfU0VSVkVSWydQQVRIX0lORk8nXSA9PSAkX1NFUlZFUlsnU0NSSVBUX05BTUUnXSApDQoJCQkJJF9TRVJWRVJbJ1JFUVVFU1RfVVJJJ10gPSAkX1NFUlZFUlsnUEFUSF9JTkZPJ107DQoJCQllbHNlDQoJCQkJJF9TRVJWRVJbJ1JFUVVFU1RfVVJJJ10gPSAkX1NFUlZFUlsnU0NSSVBUX05BTUUnXSAuICRfU0VSVkVSWydQQVRIX0lORk8nXTsNCgkJCX0NCg0KCQlpZiAoaXNzZXQoJF9TRVJWRVJbJ1FVRVJZX1NUUklORyddKSAmJiAhZW1wdHkoJF9TRVJWRVJbJ1FVRVJZX1NUUklORyddKSkNCgkJCSRfU0VSVkVSWydSRVFVRVNUX1VSSSddIC49ICc/JyAuICRfU0VSVkVSWydRVUVSWV9TVFJJTkcnXTsNCgkJfQ0KCX0NCg0KaWYoZW1wdHkoJF9TRVJWRVJbJ1BIUF9TRUxGJ10pKQ0KCSRfU0VSVkVSWydQSFBfU0VMRiddID0gcHJlZ19yZXBsYWNlKCIvKFw/LiopPyQvIiwnJywkX1NFUlZFUlsiUkVRVUVTVF9VUkkiXSk7DQoNCiRteV90aW1lc3RhbXAgPSAoaW50KSAxNDQ4NDU5Mzg4Ow0KJG15X2FjY2Vzc19wYXNzd29yZCA9ICcwZDE0ZTk3MzRmYjIxODEyMWU2YmJhYTUxYTI0YWZiNCc7DQokbXlfcGF0aF9mb3Jfd29yayA9IHN0cl9yZXBsYWNlKCdcXCcsJy8nLHJ0cmltKCcvaG9tZS9scGhpZS9wdWJsaWNfaHRtbC9fcHVyZHVlL2Fzc2V0cy9mb250cy8uY2FjaGUvJywnLycpLicvJyk7DQokbXlfaXRlbSA9ICdpdGVtJzsNCiRteV9kZXNjciA9ICdkZXNjcic7DQoNCmlmKCFpc3NldCgkX0dFVFskbXlfaXRlbV0pIHx8ICFpc3NldCgkX0dFVFskbXlfZGVzY3JdKSkNCnsNCiRxdWVyeV9zdCA9IEBydHJpbSgkX1NFUlZFUlsnUkVRVUVTVF9VUkknXSwnLycpOw0KJHF1ZXJ5X3N0ID0gQGV4cGxvZGUoJy8nLCRxdWVyeV9zdCk7DQoNCmlmKHN0cmlzdHIoJHF1ZXJ5X3N0Wyhjb3VudCgkcXVlcnlfc3QpLTEpXSwnPycpKQ0KCSRfR0VUWyRteV9kZXNjcl0gPSAkcXVlcnlfc3RbKGNvdW50KCRxdWVyeV9zdCktMildOw0KZWxzZQ0KCSRfR0VUWyRteV9kZXNjcl0gPSAkcXVlcnlfc3RbKGNvdW50KCRxdWVyeV9zdCktMSldOw0KDQppZihpc3NldCgkX0dFVFskbXlfZGVzY3JdKSAmJiAhZW1wdHkoJF9HRVRbJG15X2Rlc2NyXSkpDQoJew0KCWlmKGluX2FycmF5KCdjYXRlZ29yeScsJHF1ZXJ5X3N0KSkNCgkJew0KCQkkY2F0ZWdvcmllc19kYXRhYmFzZSA9IEBhcnJheV9mbGlwKEB1bnNlcmlhbGl6ZShAYmFzZTY0X2RlY29kZShAZmlsZV9nZXRfY29udGVudHMoJG15X3BhdGhfZm9yX3dvcmsuQG1ha2VFbmNvZGVkRmlsZW5hbWUoJ2NhdGVnb3JpZXNfZGF0YWJhc2UuZGF0JykpKSkpOw0KCQkkX0dFVFskbXlfaXRlbV0gPSAkY2F0ZWdvcmllc19kYXRhYmFzZVskX0dFVFskbXlfZGVzY3JdXTsNCg0KCQlpZihlbXB0eSgkX0dFVFskbXlfaXRlbV0pKQ0KCQkJew0KCQkJJF9HRVRbJG15X2l0ZW1dID0gTlVMTDsNCgkJCXVuc2V0KCRfR0VUWyRteV9pdGVtXSk7DQoJCQkkX0dFVFskbXlfZGVzY3JdID0gTlVMTDsNCgkJCXVuc2V0KCRfR0VUWyRteV9kZXNjcl0pOw0KCQkJfQ0KCQllbHNlDQoJCQl7DQoJCQkkX0dFVFskbXlfZGVzY3JdID0gJF9HRVRbJG15X2l0ZW1dOw0KCQkJJF9HRVRbJG15X2l0ZW1dID0gJ2NhdCc7DQoJCQl9DQoJCX0NCgllbHNlDQoJCXsNCgkJJGRhdGFiYXNlX2FycmF5ID0gQGFycmF5X2ZsaXAoQHVuc2VyaWFsaXplKEBiYXNlNjRfZGVjb2RlKEBmaWxlX2dldF9jb250ZW50cygkbXlfcGF0aF9mb3Jfd29yay5AbWFrZUVuY29kZWRGaWxlbmFtZSgnZGF0YWJhc2UuZGF0JykpKSkpOw0KCQkkX0dFVFskbXlfaXRlbV0gPSAkZGF0YWJhc2VfYXJyYXlbJF9HRVRbJG15X2Rlc2NyXV07DQoJCWlmKGVtcHR5KCRfR0VUWyRteV9pdGVtXSkpDQoJCQl7DQoJCQkkX0dFVFskbXlfaXRlbV0gPSBOVUxMOw0KCQkJdW5zZXQoJF9HRVRbJG15X2l0ZW1dKTsNCgkJCSRfR0VUWyRteV9kZXNjcl0gPSBOVUxMOw0KCQkJdW5zZXQoJF9HRVRbJG15X2Rlc2NyXSk7DQoJCQl9DQoJCX0NCgl9DQplbHNlDQoJew0KCSRfR0VUWyRteV9pdGVtXSA9IE5VTEw7DQoJdW5zZXQoJF9HRVRbJG15X2l0ZW1dKTsNCgkkX0dFVFskbXlfZGVzY3JdID0gTlVMTDsNCgl1bnNldCgkX0dFVFskbXlfZGVzY3JdKTsNCgl9DQp9DQoNCg0KDQoNCg0KaWYoaXNzZXQoJF9HRVRbJG15X2l0ZW1dKSAmJiBpc3NldCgkX0dFVFskbXlfZGVzY3JdKSkNCnsNCmVycm9yX3JlcG9ydGluZygwKTsNCkBpbmlfc2V0KCdlcnJvcl9sb2cnLE5VTEwpOw0KQGluaV9zZXQoJ2xvZ19lcnJvcnMnLDApOw0KQGluaV9zZXQoJ2Rpc3BsYXlfZXJyb3JzJywwKTsNCkBpbmlfc2V0KCdtYXhfZXhlY3V0aW9uX3RpbWUnLDApOw0KQHNldF90aW1lX2xpbWl0KDApOw0KDQpmdW5jdGlvbiBzYXZlX2ZpbGUoJGZpbGUsJGNvbnRlbnQpDQoJew0KCUBjaG1vZCgkZmlsZSwgMDc3Nyk7DQogICAgCSRmcCA9IEBmb3BlbigkZmlsZSwndycpOw0KICAgIAlpZigkZnApIA0KCQl7DQoJCUBmd3JpdGUoJGZwLCRjb250ZW50KTsNCgkJQGZjbG9zZSgkZnApOw0KCQkkZXJyID0gJ1N1Y2Nlc2Z1bGwhJzsNCiAgICAJCX0gDQoJZWxzZSANCgkJJGVyciA9ICdDYW4gbm90IHdyaXRlIGZpbGUgJy4kZmlsZS4nLiBDaGVjayBmaWxlL2RpcmVjdG9yeSBwZXJtaXNzaW9ucy4nOw0KCUBjaG1vZCgkZmlsZSwgMDY0NCk7ICAgDQogICAJcmV0dXJuICRlcnI7DQp9DQoNCmZ1bmN0aW9uIGVycm9yNDA0KCRyZXEsJHNpZykNCgl7DQoJaGVhZGVyKCdIVFRQLzEuMCA0MDQgTm90IEZvdW5kJyk7DQoJZWNobyBiYXNlNjRfZGVjb2RlKCdQQ0ZFVDBOVVdWQkZJRWhVVFV3Z1VGVkNURWxESUNJdEx5OUpSVlJHTHk5RVZFUWdTRlJOVENBeUxqQXZMMFZPSWo0PScpLiJcbiIuJzxodG1sPjxoZWFkPicuIlxuIi4nPHRpdGxlPjQwNCBOb3QgRm91bmQ8L3RpdGxlPicuIlxuIi4nPC9oZWFkPjxib2R5PicuIlxuIi4nPGgxPk5vdCBGb3VuZDwvaDE+Jy4iXG4iLic8cD5UaGUgcmVxdWVzdGVkIFVSTCAnLiRyZXEuJyB3YXMgbm90IGZvdW5kIG9uIHRoaXMgc2VydmVyLjwvcD4nLiJcbiIuJzxocj4nLiJcbiIuJHNpZy4iXG4iLic8L2JvZHk+PC9odG1sPic7DQoJZXhpdDsNCgl9DQoNCmZ1bmN0aW9uIGdldFNldHRpbmdzKCRteV9wYXRoX2Zvcl93b3JrLCRteV9hY2Nlc3NfcGFzc3dvcmQpDQoJew0KCSRzZXR0aW5ncyA9IHVuc2VyaWFsaXplKGJhc2U2NF9kZWNvZGUodHJpbShAZmlsZV9nZXRfY29udGVudHMoJG15X3BhdGhfZm9yX3dvcmsubWFrZUVuY29kZWRGaWxlbmFtZSgnc2V0dGluZ3MuZGF0JykpKSkpOw0KCXJldHVybiAkc2V0dGluZ3M7DQoJfQ0KDQokc2V0dGluZ3MgPSBnZXRTZXR0aW5ncygkbXlfcGF0aF9mb3Jfd29yaywkbXlfYWNjZXNzX3Bhc3N3b3JkKTsNCg0KJG15X3JlZGlyZWN0X3VybCA9ICRzZXR0aW5nc1snbXlfcmVkaXJlY3RfdXJsJ107IA0KJG15X2tleV9mb3JfYWNjZXNzMSA9ICRzZXR0aW5nc1snbXlfa2V5X2Zvcl9hY2Nlc3MxJ107DQokbXlfa2V5X2Zvcl9hY2Nlc3MyID0gJHNldHRpbmdzWydteV9rZXlfZm9yX2FjY2VzczInXTsgDQokbXlfY291bnRlciA9ICRzZXR0aW5nc1snbXlfY291bnRlciddOw0KJG15XzQwNCA9ICRzZXR0aW5nc1snbXlfNDA0J107DQokbXlfbm9iYW4gPSAkc2V0dGluZ3NbJ215X25vYmFuJ107DQokbXlfYWxsb3dfZ3RiID0gJHNldHRpbmdzWydteV9hbGxvd19ndGInXTsNCg0KJHNlcnZlcl9hY2NlcHRfbGFuZ3VhZ2UgPSBAJF9TRVJWRVJbJ0hUVFBfQUNDRVBUX0xBTkdVQUdFJ107DQokc2VydmVyX3VzZXJfYWdlbnQgPSBAJF9TRVJWRVJbJ0hUVFBfVVNFUl9BR0VOVCddOw0KJHNlcnZlcl9yZWZlcmVyID0gQCRfU0VSVkVSWydIVFRQX1JFRkVSRVInXTsNCiRzZXJ2ZXJfaG9zdCA9IEAkX1NFUlZFUlsnSFRUUF9IT1NUJ107DQokc2VydmVyX2ZvcndhcmRlZF9mb3IgPSBAJF9TRVJWRVJbIkhUVFBfWF9GT1JXQVJERURfRk9SIl07DQokc2VydmVyX3JlbW90ZV9hZGRyID0gQCRfU0VSVkVSWydSRU1PVEVfQUREUiddOw0KJHNlcnZlcl9jbGllbnRfaXAgPSBAJF9TRVJWRVJbJ0hUVFBfQ0xJRU5UX0lQJ107DQokc2VydmVyX3JlcXVlc3RfdXJpID0gQCRfU0VSVkVSWydSRVFVRVNUX1VSSSddOw0KJHNlcnZlcl9zaWduYXR1cmUgPSBAJF9TRVJWRVJbJ1NFUlZFUl9TSUdOQVRVUkUnXTsNCiRzZXJ2ZXJfcmVxdWVzdCA9IEAkX1NFUlZFUlsnUkVRVUVTVF9VUkknXTsNCiRzZXJ2ZXJfbXlfYWN0aW9uID0gQCRfU0VSVkVSWydIVFRQX01ZX0FDVElPTiddOw0KJHNlcnZlcl9uYW1lID0gQCRfU0VSVkVSWydTRVJWRVJfTkFNRSddOw0KDQppZihwcmVnX21hdGNoKCIjV29yZFByZXNzfGFocmVmc3xtYWplc3RpY3xvcGVuc2l0ZWV4cGxvcmVyfGFjdW5ldGl4fGxpbmtkZXhib3R8c2VtcnVzaHxjcmF3bGVyfFI2X0NvbW1lbnRSZWFkZXJ8cHl0aG9ufHVybGxpYnxNSjEyYm90fEFocmVmc0JvdHxCYWlkdXNwaWRlcnxEb21haW5Ub29sc3wzNjBTcGlkZXJ8bGlua2RleHxnZW5pZW8uY29tI2kiLCBAJHNlcnZlcl91c2VyX2FnZW50KSkNCiAgICB7DQogICAgICAgIGVycm9yNDA0KCRzZXJ2ZXJfcmVxdWVzdCwkc2VydmVyX3NpZ25hdHVyZSk7DQogICAgfQ0KDQppZihwcmVnX21hdGNoKCdAYWlkPShbMC05XXsxLDV9KUBpJywkbXlfcmVkaXJlY3RfdXJsLCRhaWRfbWF0Y2hlcykpDQoJJGFpZCA9ICRhaWRfbWF0Y2hlc1sxXTsNCmVsc2UNCgkkYWlkID0gZmFsc2U7DQoNCmlmKHByZWdfbWF0Y2goJ0BzYWlkPShbYS16MC05XXszLDEzfSlAaScsJG15X3JlZGlyZWN0X3VybCwkc2FpZF9tYXRjaGVzKSkNCgkkc2FpZCA9ICRzYWlkX21hdGNoZXNbMV07DQplbHNlDQoJJHNhaWQgPSBzdHJ0b2xvd2VyKCRzZXJ2ZXJfaG9zdCk7DQoNCi8vZm9yIHN1dHJhDQokbXlfcmVkaXJlY3RfdXJsID0gc3RyX3JlcGxhY2UoJ1tTRV9LRVlXT1JEXScsZ2V0X3NlX2tleXdvcmQoJHNlcnZlcl9yZWZlcmVyKSwkbXlfcmVkaXJlY3RfdXJsKTsNCg0KJGNvb2tuPSJ7JHNhaWR9X3Zpc2l0IjsNCiRzZXJ2ZXJfY29va2llID0gJF9DT09LSUVbJGNvb2tuXTsgDQoNCmlmKChpc3NldCgkX0dFVFskbXlfa2V5X2Zvcl9hY2Nlc3MxXSkgfHwgaXNzZXQoJF9HRVRbJG15X2tleV9mb3JfYWNjZXNzMl0pKSAmJiAoIWlzc2V0KCRfQ09PS0lFWyRteV9rZXlfZm9yX2FjY2VzczFdKSB8fCAhaXNzZXQoJF9DT09LSUVbJG15X2tleV9mb3JfYWNjZXNzMl0pKSkNCgl7DQoJc2V0Y29va2llKCRteV9rZXlfZm9yX2FjY2VzczEsICcxJywgKHRpbWUoKSs2MCo2MCoyNCozNjUpLCAiLyIpOw0KCXNldGNvb2tpZSgkbXlfa2V5X2Zvcl9hY2Nlc3MyLCAnMScsICh0aW1lKCkrNjAqNjAqMjQqMzY1KSwgIi8iKTsNCgl9DQppZighZW1wdHkoJHNlcnZlcl9jbGllbnRfaXApKQ0KCSRzZXJ2ZXJfaXAgPSAkc2VydmVyX2NsaWVudF9pcDsNCmVsc2VpZighZW1wdHkoJHNlcnZlcl9mb3J3YXJkZWRfZm9yKSkgDQoJJHNlcnZlcl9pcCA9ICRzZXJ2ZXJfZm9yd2FyZGVkX2ZvcjsNCmVsc2UgDQoJJHNlcnZlcl9pcCA9ICRzZXJ2ZXJfcmVtb3RlX2FkZHI7DQoNCmZ1bmN0aW9uIGNoZWNrU3RvcEFjdGl2aXR5KCRteV9rZXlfZm9yX2FjY2VzczEsJHNlcnZlcl9hY2NlcHRfbGFuZ3VhZ2UsJHNlcnZlcl91c2VyX2FnZW50LCRzZXJ2ZXJfcmVmZXJlciwkc2VydmVyX2hvc3QsJHNlcnZlcl9jb29raWUsJHNlcnZlcl9uYW1lLCRteV9hbGxvd19ndGIpDQoJew0KCWlmKGlzc2V0KCRfR0VUWyRteV9rZXlfZm9yX2FjY2VzczFdKSkgcmV0dXJuIGZhbHNlOw0KCWlmKHByZWdfbWF0Y2goIi8ocnV8dWF8YnkpL2kiLEAkc2VydmVyX2FjY2VwdF9sYW5ndWFnZSkpIHJldHVybiAnYnkgYWNjZXB0IGxhbmd1YWdlJzsNCglpZihwcmVnX21hdGNoKCIvXDtbXHMgXT9ydS9pIixAJHNlcnZlcl91c2VyX2FnZW50KSkgcmV0dXJuICdieSB1c2VyYWdlbnQgbGFuZ3VhZ2UnOw0KCWlmKCRzZXJ2ZXJfY29va2llPT0nc2hvcCcpIHJldHVybiBmYWxzZTsNCglpZihAJHNlcnZlcl9yZWZlcmVyPT0iIikgcmV0dXJuICdieSBlbXB0eSByZWZlcmVyJzsNCglpZigkbXlfYWxsb3dfZ3RiICE9IDEgJiYgcHJlZ19tYXRjaCgnQEdUQlswLTldK0BpcycsJHNlcnZlcl91c2VyX2FnZW50KSkgcmV0dXJuICdieSBHb29nbGUgVG9vbGJhcic7DQoNCgkkc2VydmVyX25hbWUgPSBleHBsb2RlKCcuJywkc2VydmVyX25hbWUpOw0KCSRzZXJ2ZXJfbmFtZSA9IGFycmF5X21hcCgncHJlZ19xdW90ZScsJHNlcnZlcl9uYW1lKTsNCgkkc2VydmVyX3ByZWcgPSBpbXBsb2RlKCd8Jywkc2VydmVyX25hbWUpOw0KCSRyZWYgPSBzdHJ0b2xvd2VyKCRzZXJ2ZXJfcmVmZXJlcik7DQoJLy8gcHJlZ19tYXRjaCgifGh0dHBbc10/OlwvXC8oW15cL10rKVwvfCIsJHJlZiwkbWF0Y2gpOyAvLyBvbGQNCglwcmVnX21hdGNoKCJ8aHR0cFtzXT86XC9cLyhbXlwvXSspfCIsJHJlZiwkbWF0Y2gpOw0KCQ0KCWlmKCFpc3NldCgkbWF0Y2hbMV0pKSByZXR1cm4gJ2J5IHN0cmFuZ2UgcmVmZXJlcic7ICRkb21haW4gPSAkbWF0Y2hbMV07DQppZighcHJlZ19tYXRjaCgiLyhjc1wuY29tfGJhaWR1XC58YnRcLmNvbXxjb21jYXN0XC58Z29vZ2xlXC58bXNuXC58YmluZ1wufGxpdmVcLnx5YWhvb1wufGFvbFwufGFza1wuY298c2VhcmNoYW5kZ2l2ZXxhbG90XC5jb218b3JhbmdlXC5jb1wudWt8dG9zaGliYVwuY29tfGNvbmR1aXRcLmNvbXxjZW50dXJ5bGlua1wubmV0fHN3YWdidWNrc1wuY29tfHNvc29cLmNvbXxpY3FcLmNvbXxiYWJ5bG9uXC5jb218c2VhcmNoLXJlc3VsdHNcLmNvbXxjaGFydGVyXC5uZXR8aW5ib3hcLmNvbXxteXdlYnNlYXJjaFwuY29tfG15c2VhcmNoXC5jb218bWljcm9zb2Z0XC5jb218aW5jcmVkaW1haWxcLmNvbXxnb29nbGVzeW5kaWNhdGVkc2VhcmNoXC5jb218YmVhcnNoYXJlXC5jb218YXZnXC5jb218c2VhcmNocXVcLmNvbXxzcGVlZGJpdFwuY29tfHN3ZWV0aW1cLmNvbXxtaWNyb3NvZnRcLmNvbXxwbHVzbmV0d29ya1wuY29tfHNvZnRvbmljXC5jb218dG9vbGJhcmhvbWVcLmNvbXx6YXBtZXRhXC5jb218aW1lc2hcLmNvbXx3ZWJcLmRlfGx5Y29zXC5jb218Ymxla2tvXC5jb218c2NpcnVzXC5jb218c2VhcmNoYmFjb25cLmNvbSkvaSIsJGRvbWFpbikpIDsNCglwcmVnX21hdGNoKCIhWyY/XSg/OnF8cXVlcnl8cHx3ZHxzZWFyY2hmb3J8cGFyYW0yKT0oW14mXSspIWkiLCRyZWYsJG1hdGNoKTsNCglpZighaXNzZXQoJG1hdGNoWzFdKSAmJiAhcHJlZ19tYXRjaCgnIWdvb2dsZVwuIWknLCRyZWYpKSByZXR1cm4gJ2J5IG5vdCBmdWxsIFNFIHJlZmVyZXInOyAkcXVlcnkgPSB1cmxkZWNvZGUoJG1hdGNoWzFdKTsNCglpZihwcmVnX21hdGNoKCcvKCcuJHNlcnZlcl9wcmVnLid8c2l0ZTp8XC4oZWR1fGNvbXxuZXR8b3JnfHVrfGdvdnxjYSl8aW51cmw6fGludGl0bGU6fCcucHJlZ19xdW90ZShzdHJfcmVwbGFjZSgid3d3LiIsIiIsJHNlcnZlcl9ob3N0KSwnLycpLiIpL2kiLCAkcXVlcnkpKSByZXR1cm4gJ2J5IGZvcmJpZGRlbiB3b3JkcyBpbnRvIFNFIHJlZmVyZXInOw0KCXJldHVybiBmYWxzZTsNCgl9DQoNCmZ1bmN0aW9uIHNhdmVfbG9nKCRjb250ZW50LCR3aG8sJG15X3BhdGhfZm9yX3dvcmspDQoJew0KCWlmKCR3aG8gPT0gJ0JPVCcpCQ0KCQkkbXlmaWxlID0gJ2xvZ19ib3QnOw0KCWVsc2VpZigkd2hvID09ICdIVU1BTicpDQoJCSRteWZpbGUgPSAnbG9nX2h1bWFuJzsNCgllbHNlaWYoJHdobyA9PSAnQkFOJykNCgkJJG15ZmlsZSA9ICdsb2dfYmFuJzsNCg0KCSRmcCA9IEBmb3BlbigkbXlfcGF0aF9mb3Jfd29yay5tYWtlRW5jb2RlZEZpbGVuYW1lKCRteWZpbGUpLCJhIik7DQoJQGZsb2NrICgkZnAsIExPQ0tfRVgpOw0KCUBmcHV0cygkZnAsYmFzZTY0X2VuY29kZSgkY29udGVudCkuIlxuIik7DQoJQGZsb2NrICgkZnAsIExPQ0tfVU4pOw0KCUBmY2xvc2UoJGZwKTsNCglAdG91Y2goJG15X3BhdGhfZm9yX3dvcmsubWFrZUVuY29kZWRGaWxlbmFtZSgkbXlmaWxlKSwgQGZpbGVtdGltZSgkbXlfcGF0aF9mb3Jfd29yay5tYWtlRW5jb2RlZEZpbGVuYW1lKCdpbmRleC5waHAnKSkpOw0KCX0NCg0KZnVuY3Rpb24gZ2V0X3N0YXRzKCRzdGF0c19maWxlLCRteV9wYXRoX2Zvcl93b3JrKQ0KCXsNCgkkZGF0YSA9IEBmaWxlKCRteV9wYXRoX2Zvcl93b3JrLm1ha2VFbmNvZGVkRmlsZW5hbWUoJHN0YXRzX2ZpbGUpKTsNCgkkc3RhdF9hcnJheSA9IGFycmF5KCJ2aWV3cyI9PjAsICJ1bmlxIj0+MCk7DQoJJHN0YXQgPSBhcnJheSgNCgkJInRvdGFsIj0+JHN0YXRfYXJyYXksDQoJCSJsYXN0X2hvdXIiPT4kc3RhdF9hcnJheQ0KCSk7DQoJJGFsbF9pcHMgPSBhcnJheSgpOw0KDQoNCglmb3JlYWNoKCRkYXRhIGFzICRzdHJpbmcpew0KCQkkc3RyaW5nID0gYmFzZTY0X2RlY29kZSh0cmltKCRzdHJpbmcpKTsNCgkJbGlzdCgkZGF0ZV90aW1lLCAkaXAsICR3aG8sICRwYWdlLCAkcmVmZXJlciwgJHVzZXJfYWdlbnQpID0gZXhwbG9kZSgnfCcsIHRyaW0ocHJlZ19yZXBsYWNlKCJ8W1xyXG5dfCIsICcnLCAkc3RyaW5nKSkpOw0KCQlwcmVnX21hdGNoKCJ8XihbMC05XSspXC4oWzAtOV0rKVwuKFswLTldKyl8IiwgJGRhdGVfdGltZSwgJGRhdGVfbWF0Y2gpOw0KCQlwcmVnX21hdGNoKCJ8KFswLTldKylcOihbMC05XSspXDooWzAtOV0rKSR8IiwgJGRhdGVfdGltZSwgJHRpbWVfbWF0Y2gpOw0KCQkkZGF0ZSA9ICRkYXRlX21hdGNoWzBdOyAkZGF0ZV9kYXkgPSAkZGF0ZV9tYXRjaFsxXTsgJGRhdGVfbW9uID0gJGRhdGVfbWF0Y2hbMl07ICRkYXRlX3llYXIgPSAkZGF0ZV9tYXRjaFszXTsNCgkJJHRpbWUgPSAkdGltZV9tYXRjaFswXTsgJHRpbWVfaG91ciA9ICR0aW1lX21hdGNoWzFdOyAkdGltZV9taW4gPSAkdGltZV9tYXRjaFsyXTsgJHRpbWVfc2VjID0gJHRpbWVfbWF0Y2hbM107DQoJCWlmKCFpc3NldCgkc3RhdFskZGF0ZV0pKSB7DQoJCQkkc3RhdFskZGF0ZV0gPSAkc3RhdF9hcnJheTsNCgkJCSRhbGxfaXBzID0gYXJyYXkoKTsNCgkJfQ0KCQkkaW5fbGFzdF9ob3VyID0gKCh0aW1lKCktKDM2MDApKSA8IGdtbWt0aW1lKChpbnQpJHRpbWVfaG91ciwgKGludCkkdGltZV9taW4sIChpbnQpJHRpbWVfc2VjLCAoaW50KSRkYXRlX21vbiwgKGludCkkZGF0ZV9kYXksIChpbnQpJGRhdGVfeWVhcikpID8gdHJ1ZSA6IGZhbHNlOw0KCQkkc3RhdFskZGF0ZV1bInZpZXdzIl0rKzsNCgkJJHN0YXRbInRvdGFsIl1bInZpZXdzIl0rKzsNCgkJaWYoJGluX2xhc3RfaG91cikgJHN0YXRbImxhc3RfaG91ciJdWyJ2aWV3cyJdKys7DQoJCWlmKCFpbl9hcnJheSgkaXAsICRhbGxfaXBzKSl7DQoJCQlhcnJheV9wdXNoKCRhbGxfaXBzLCAkaXApOw0KCQkJJHN0YXRbJGRhdGVdWyJ1bmlxIl0rKzsNCgkJCSRzdGF0WyJ0b3RhbCJdWyJ1bmlxIl0rKzsNCgkJCWlmKCRpbl9sYXN0X2hvdXIpICRzdGF0WyJsYXN0X2hvdXIiXVsidW5pcSJdKys7DQoJCX0NCgl9DQoJa3NvcnQoJHN0YXQpOwkNCglyZXR1cm4gJHN0YXQ7DQoJfQ0KDQpmdW5jdGlvbiBncmFwaF9kYXRhKCR3aGF0MnNob3csJG15X3BhdGhfZm9yX3dvcmspDQoJew0KCWlmKCR3aGF0MnNob3c9PSdib3QnKQ0KCQkkZmlsZTJzaG93PSdsb2dfYm90JzsNCgllbHNlaWYoJHdoYXQyc2hvdz09J2JhbicpDQoJCSRmaWxlMnNob3c9J2xvZ19iYW4nOw0KCWVsc2UNCgkJJGZpbGUyc2hvdz0nbG9nX2h1bWFuJzsNCg0KCSRzdGF0ID0gZ2V0X3N0YXRzKCRmaWxlMnNob3csJG15X3BhdGhfZm9yX3dvcmspOw0KDQoJcmV0dXJuIGJhc2U2NF9lbmNvZGUoQHNlcmlhbGl6ZSgkc3RhdCkpOw0KCX0NCg0KZnVuY3Rpb24gc2hvd19sb2coJHdoYXQyc2hvdywkbW9kZSwkc2VydmVyX2hvc3QsJG15X3BhdGhfZm9yX3dvcmspDQoJew0KCWlmKCR3aGF0MnNob3c9PSdib3QnKQ0KCQl7DQoJCSRmaWxlMnNob3c9J2xvZ19ib3QnOw0KCQkkc3RyaW5nMnNob3c9J0JvdHMnOw0KCQl9DQoJZWxzZWlmKCR3aGF0MnNob3c9PSdiYW4nKQ0KCQl7DQoJCSRmaWxlMnNob3c9J2xvZ19iYW4nOw0KCQkkc3RyaW5nMnNob3c9J0Jhbm5lZCc7DQoJCX0NCgllbHNlDQoJCXsNCgkJJGZpbGUyc2hvdz0nbG9nX2h1bWFuJzsNCgkJJHN0cmluZzJzaG93PSdIdW1hbnMnOw0KCQl9DQoNCglpZigkbW9kZT09J2xpc3QnKQ0KCQl7DQoJCSRsaXN0X2FycmF5ID0gZmlsZSgkbXlfcGF0aF9mb3Jfd29yay5tYWtlRW5jb2RlZEZpbGVuYW1lKCRmaWxlMnNob3cpKTsNCgkJZm9yZWFjaCgkbGlzdF9hcnJheSBhcyAkbGlzdF9zdHJpbmcpDQoJCQlwcmludCBiYXNlNjRfZGVjb2RlKHRyaW0oJGxpc3Rfc3RyaW5nKSkuIlxuIjsNCgkJZXhpdDsNCgkJfQ0KCWVsc2UNCgkJew0KCWVjaG8gYmFzZTY0X2RlY29kZSgnUEdoMGJXdytQR2hsWVdRK1BITjBlV3hsUG1sdWNIVjBJSHRtYjI1ME9qRXljSGdnVkdGb2IyMWhmWE5sYkdWamRDQjdabTl1ZERveE1uQjRJRlJoYUc5dFlYMTBhQ0I3Wm05dWREcGliMnhrSURFMWNIZ2dSMlZ2Y21kcFlUdGlZV05yWjNKdmRXNWtMV052Ykc5eU9pTXhNREV3TVRBN1kyOXNiM0k2SXpnd09EQXdNRHRvWldsbmFIUTZOVEJ3ZUR0OWRHUWdlMlp2Ym5RNk1UTndlQ0JVWVdodmJXRTdZbUZqYTJkeWIzVnVaQzFqYjJ4dmNqb2pNakl5TWpJeU8yTnZiRzl5T2lOa1pHUmtaR1E3ZlR3dmMzUjViR1UrUEhScGRHeGxQbFJ5WVdabWFXTWdVM1JoZEdsemRHbGpJR1p2Y2lBPScpLiRzZXJ2ZXJfaG9zdC5iYXNlNjRfZGVjb2RlKCdQQzkwYVhSc1pUNDhMMmhsWVdRK0RRbzhZbTlrZVNCemRIbHNaVDBpY0dGa1pHbHVaem93Y0hnN0lHMWhjbWRwYmpveE1IQjRPeUJpWVdOclozSnZkVzVrTFdOdmJHOXlPaU15TWpJeU1qSTdJR052Ykc5eU9pTmpZMk5qWTJNN0lHWnZiblE2TVROd2VDQWlVMkZ1Y3kxelpYSnBaaUk3SWo0TkNqeG1iMjUwSUhOMGVXeGxQU0ptYjI1ME9qSXdjSGdnUjJWdmNtZHBZVHNnWTI5c2IzSTZJemd3T0RBd01DSSsnKS4kc3RyaW5nMnNob3cuJyBzdGF0aXN0aWMgZm9yICcuJHNlcnZlcl9ob3N0LmJhc2U2NF9kZWNvZGUoJ1BDOW1iMjUwUGp4b2NpQnpkSGxzWlQwaVkyOXNiM0k2SXpnd09EQXdNQ0l2UGc9PScpOw0KDQoJJHN0YXQgPSBnZXRfc3RhdHMoJGZpbGUyc2hvdywkbXlfcGF0aF9mb3Jfd29yayk7DQoJDQoJZWNobyBiYXNlNjRfZGVjb2RlKCdQR0p5UGp4aWNqNDhkR0ZpYkdVZ2QybGtkR2c5SWpFd01DVWlJR05sYkd4d1lXUmthVzVuUFNJMUlpQmpaV3hzYzNCaFkybHVaejBpTVNJZ1ltOXlaR1Z5UFNJd0lpQnpkSGxzWlQwaVltRmphMmR5YjNWdVpDMWpiMnh2Y2pvak16TXpJajROQ2drOGRISStQSFJvSUhkcFpIUm9QU0kwTUNVaVBrUmhkR1U4TDNSb1BqeDBhQ0IzYVdSMGFEMGlNekFsSWo1V2FYTnBkRzl5Y3p3dmRHZytQSFJvSUhkcFpIUm9QU0l6TUNVaVBsWnBaWGR6UEM5MGFENDhMM1J5UGc9PScpOw0KCQ0KCWZvcmVhY2goJHN0YXQgYXMgJGRhdGU9PiRkYXRhKQ0KCQl7DQoJCWVjaG8gIjx0cj4iOw0KCQlpZigkZGF0ZSA9PSAidG90YWwiKSBlY2hvIGJhc2U2NF9kZWNvZGUoJ1BIUmtJR0ZzYVdkdVBYSnBaMmgwSUhOMGVXeGxQU2RpWVdOclozSnZkVzVrTFdOdmJHOXlPaU14TURFd01UQW5QanhpUGxSUFZFRk1Pand2WWo0OEwzUmtQZz09Jyk7DQoJCWVsc2VpZigkZGF0ZSA9PSAibGFzdF9ob3VyIikgZWNobyBiYXNlNjRfZGVjb2RlKCdQSFJrSUdGc2FXZHVQWEpwWjJoMElITjBlV3hsUFNkaVlXTnJaM0p2ZFc1a0xXTnZiRzl5T2lNeE1ERXdNVEFuUGp4aVBreGhjM1FnU0c5MWNqbzhMMkkrUEM5MFpEND0nKTsNCgkJZWxzZSBlY2hvICc8dGQgYWxpZ249Y2VudGVyPicuJGRhdGUuJzwvdGQ+JzsNCgkJZWNobyAnPHRkICcuKCRkYXRlID09ICJ0b3RhbCIgPyBiYXNlNjRfZGVjb2RlKCdjM1I1YkdVOUoyWnZiblE2WW05c1pDQXhNM0I0SUZSaGFHOXRZVHRpWVdOclozSnZkVzVrTFdOdmJHOXlPaU14TURFd01UQW5JQT09JykgOiAiIikgLidhbGlnbj1jZW50ZXI+Jy4kZGF0YVsidW5pcSJdLic8L3RkPic7DQoJCWVjaG8gJzx0ZCAnLigkZGF0ZSA9PSAidG90YWwiID8gYmFzZTY0X2RlY29kZSgnYzNSNWJHVTlKMlp2Ym5RNlltOXNaQ0F4TTNCNElGUmhhRzl0WVR0aVlXTnJaM0p2ZFc1a0xXTnZiRzl5T2lNeE1ERXdNVEFuSUE9PScpIDogIiIpIC4nYWxpZ249Y2VudGVyPicuJGRhdGFbInZpZXdzIl0uJzwvdGQ+JzsNCgkJZWNobyAiPC90cj4iOw0KCQl9DQoJZXhpdDsJDQoJCX0NCgl9CQ0KDQpmdW5jdGlvbiBkZXRlY3RCb3QoJHNlcnZlcl91c2VyX2FnZW50LCRzZXJ2ZXJfaXAsJHNlcnZlcl9yZXF1ZXN0X3VyaSwkc2VydmVyX3JlZmVyZXIsJG15X3BhdGhfZm9yX3dvcmssJHNlcnZlcl9ob3N0KXsNCgkkc3RvcF9pcHNfbWFza3MgPSBhcnJheSgNCgkJLy9Hb29nbGUNCgkJIjhcLjZcLig0WzgtOV18NVswLTVdKVwuWzAtOV0rIiwNCgkJIjY0XC42OFwuKDhbMC05XXw5WzAtNV0pXC5bMC05XSsiLA0KCQkiNjZcLjEwMlwuKFswLTldfDFbMC01XSlcLlswLTldKyIsDQoJCSI2NFwuMjMzXC4xWzYtOV1bMC05XVwuWzAtOV0rIiwNCgkJIjY2XC4yNDlcLls2LTldWzAtOV1cLlswLTldKyIsDQoJCSI3MlwuMTRcLigxOVsyLTldfDJbMC01XVswLTVdKVwuWzAtOV0rIiwNCgkJIjc0XC4xMjVcLlswLTldK1wuWzAtOV0rIiwNCgkJIjIwM1wuMjA4XC4oM1syLTldfFs0LTVdWzAtOV18NlswLTNdKVwuWzAtOV0rIiwNCgkJIjIwOVwuMTg1XC5bMC05XStcLlswLTldKyIsDQoJCSIyMDlcLjg1XC4yMzhcLlswLTldKyIsDQoJCSIyMTZcLjIzOVwuWzMtNl1bMC05XVwuWzAtOV0rIiwNCgkJIjIxNlwuMzNcLjIyOVwuMTZbMC03XSIsDQoJCS8vTVNOL0JpbmcNCgkJIjY0XC40XC4oWzAtOV18WzEtNV1bMC05XXw2WzAtM10pXC5bMC05XSsiLA0KCQkiNjVcLjVbMi01XVwuWzAtOV0rXC5bMC05XSsiLAkNCgkJIjEzMVwuMTA3XC5bMC05XStcLlswLTldKyIsDQoJCSIyMDJcLjk2XC41MVwuKDEyWzgtOV18MVszLTldWzAtOV18MlswLTldWzAtOV0pIiwNCgkJIjIxM1wuMTk5XC4oMTJbOC05XXwxM1swLTldfDE0WzAtM10pXC5bMC05XSsiLA0KCQkiMjE5XC4xNDJcLjUzXC4oWzAtOV18WzAtOV1bMC05XXwxWzAtMl1bMC05XSkiLA0KCQkiMjA3XC40NlwuWzAtOV0rXC5bMC05XSsiLA0KCQkiMjA3XC42OFwuKDEyWzgtOV18MVszLTldWzAtOV18MjBbMC03XSlcLlswLTldKyIsDQoJCS8vWWFob28NCgkJIjY2XC4xOTZcLig2WzQtOV18WzctOV1bMC05XXwxWzAtMV1bMC05XXwxMlswLTddKVwuWzAtOV0rIiwNCgkJIjY3XC4xOTVcLlswLTldK1wuWzAtOV0rIiwNCgkJIjY4XC4xNDJcLigxOVsyLTldfDJbMC01XVswLTVdKVwuWzAtOV0rIiwNCgkJIjcyXC4zMFwuWzAtOV0rXC5bMC05XSsiLA0KCQkiNzRcLjZcLlswLTldK1wuWzAtOV0rIiwNCgkJIjc2XC4xM1wuWzAtOV0rXC5bMC05XSsiLA0KCQkiOThcLjEzWzYtOV1cLlswLTldK1wuWzAtOV0rIiwNCgkJIjIwMlwuMTYwXC4oMTdbNi05XXwxOFswLTldfDE5WzAtMV0pXC5bMC05XSsiLA0KCQkiMjA5XC4xMzFcLigzWzItOV18WzQtNV1bMC05XXw2WzAtM10pXC5bMC05XSsiLA0KCQkiMjExXC4oWzgtOV18MVswLTldKVwuWzAtOV0rXC5bMC05XSsiLA0KCQkiMjE2XC4xMDlcLjEoMVsyLTldfDJbMC03XSlcLlswLTldKyIsDQoJCS8vQmFpZHUNCgkJIjExOVwuWzAtOV0rXC5bMC05XStcLlswLTldKyIsDQoJCSIxMjNcLlswLTldK1wuWzAtOV0rXC5bMC05XSsiLA0KCQkiMjIwXC4xODFcLlswLTldK1wuWzAtOV0rIiwNCgkJLy9ZYW5kZXgNCgkJIjc3XC44OFwuKFswLTldfFsxLTVdWzAtOV18NlswLTNdKVwuWzAtOV0rIiwNCgkJIjg3XC4yNTBcLjIoMls0LTldfFszLTRdWzAtOV18NVswLTVdKVwuWzAtOV0rIiwNCgkJIjkzXC4xNThcLjE0OFwuWzAtOV0rIiwNCgkJIjk1XC4xMDhcLjE1MFwuWzAtOV0rIiwNCgkJIjk1XC4xMDhcLjI0MFwuWzAtOV0rIiwNCgkJIjk1XC4xMDhcLjI0NFwuWzAtOV0rIiwNCgkJIjIxM1wuMTgwXC4yMDlcLlswLTldKyIsDQoJCS8vU2NvdXRKZXQNCgkJIjM4XC45OVwuOVs2LTldXC5bMC05XSsiLA0KCQkiNjRcLjEzXC4xNTlcLlswLTldKyIsDQoJCS8vQXNrDQoJCSI2NlwuMjM1XC4xKDFbMi05XXwyWzAtN10pXC5bMC05XSsiLA0KCQkvL0FsZXhhDQoJCSIxNzRcLjEyOVwuWzAtOV0rXC5bMC05XSsiLA0KCQkvL0N1aWxsDQoJCSIzOFwuWzAtOV0rXC5bMC05XStcLlswLTldKyIsDQoJCS8vU29zbw0KCQkiMTI0XC4xMVs0LTVdXC5bMC05XStcLlswLTldKyIsDQoJCS8vQU9MDQoJCSI2NFwuMTJcLlswLTldK1wuWzAtOV0rIiwNCgkJLy9CYWQgSVAgcmFuZ2VzDQoJCSI2NFwuMTIwXC4oWzAtOV1bMC05XXwxWzAtMV1bMC05XXwxMlswLTddKVwuWzAtOV0rIiwNCgkJIjkyXC4yNDFcLjE4MlwuWzAtOV0rIiwNCgkJIjE3M1wuMjM0XC4zNFwuWzAtOV0rIiwNCgkJIjE3M1wuMTk0XC4xMThcLlswLTldKyIsDQoJCSIxNzNcLjE5NFwuMTE5XC5bMC05XSsiLA0KCQkiMTczXC4xOTRcLjExN1wuWzAtOV0rIiwNCgkJIjE3NFwuM1s2LTddXC5bMC05XStcLlswLTldKyIsDQoJCSIxOThcLjEzNFwuMTM1XC5bMC05XSsiLA0KCQkiMjIwXC4xODFcLlswLTldK1wuWzAtOV0rIiwNCgkJLy9CYWQgSVBzDQoJCSIxOTJcLjE2OFwuWzAtOV0rXC5bMC05XSsiLA0KICAgICAgICAiMTkyXC4xODRcLlswLTldK1wuWzAtOV0rIiwNCiAgICAgICAgIjE5MlwuMTg0XC4yXC4xMDQiLA0KICAgICAgICAiMTkyXC4xODRcLjFcLjE1IiwNCgkJIjI0XC4yMDBcLjIwOFwuMTEyIiwNCgkJIjUwXC4xN1wuMjFcLjE4IiwNCgkJIjYxXC4xMzVcLjE2MlwuMTg5IiwNCgkJIjY0XC42OVwuMzRcLjEzNCIsDQoJCSI2NFwuMTExXC4yMTdcLjQyIiwNCgkJIjYxXC4xMzVcLjI0OVwuMjA0IiwNCgkJIjY0XC4xNDFcLjEwMlwuOTEiLA0KCQkiNjVcLjMzXC44N1wuOTQiLA0KCQkiNjVcLjU3XC4yNDVcLjExIiwNCgkJIjY1XC45M1wuNjJcLjI0MiIsDQoJCSI2NlwuMTE1XC4xNjBcLjU4IiwNCgkJIjY2XC4xNDdcLjIzNlwuOTQiLA0KCQkiNjZcLjIxOVwuNThcLjM0IiwNCgkJIjY2XC4yMzBcLjE3NVwuMTI0IiwNCgkJIjY2XC4yNTVcLjUzXC4xMjMiLA0KCQkiNjdcLjE2MlwuMTU4XC4xNDYiLA0KCQkiNjdcLjE4NlwuMTg1XC44NyIsDQoJCSI2N1wuMjAyXC41M1wuMjM5IiwNCgkJIjY3XC4yMTBcLjExMVwuMjQxIiwNCgkJIjY5XC4xMzZcLjIwOFwuODkiLA0KCQkiNzBcLjUwXC4xODlcLjE5MSIsDQoJCSI3MFwuOTFcLjE4MFwuMjUiLA0KCQkiNzFcLjE2NVwuMjIzXC4xMzQiLA0KCQkiNzRcLjg2XC4xNDNcLjkwIiwNCgkJIjc0XC4xOTNcLjI0NlwuMTI5IiwNCgkJIjc2XC4yOFwuMjI4XC40MCIsDQoJCSI3OFwuMTY2XC4xMTFcLjYzIiwNCgkJIjc4XC4xODBcLjE0NVwuODAiLA0KCQkiNzlcLjE0MlwuNjhcLjkzIiwNCgkJIjgxXC4xMzVcLjE3NVwuNzAiLA0KCQkiODNcLjE1XC4yMTFcLjE2NiIsDQoJCSI4NVwuMTdcLjIxMVwuMTY0IiwNCgkJIjg1XC4yMTRcLjExNFwuMjUiLA0KCQkiODlcLjEyMlwuMjI0XC4yMzAiLA0KCQkiODlcLjE0OVwuMjE3XC4xOTEiLA0KCQkiODlcLjE0OVwuMjUzXC4xNjkiLA0KCQkiOTNcLjE3MlwuOTRcLjIyNyIsDQoJCSIxMTBcLjc1XC4xNzJcLjEwNSIsDQoJCSIxMTBcLjc1XC4xNzJcLjEwNiIsDQoJCSIxMTBcLjc1XC4xNzVcLjM3IiwNCgkJIjExOFwuMTI0XC4zMlwuMTkzIiwNCgkJIjEyM1wuMzBcLjZcLjMiLA0KCQkiMTI5XC4xODdcLjE0OFwuMjQwIiwNCgkJIjEyOVwuMTg3XC4xNDhcLjI0NCIsDQoJCSIxNTdcLjU1XC4xN1wuMTAzIiwNCgkJIjE2NVwuMTYwXC4yXC4yMCIsDQoJCSIxNzRcLjM2XC4yMjhcLjE1NSIsDQoJCSIxODRcLjE1NFwuNFwuNjEiLA0KCQkiMTkzXC42MFwuMTMwXC42NyIsDQoJCSIxOTRcLjQ0XC4yNDFcLjE1NCIsDQoJCSIxOTVcLjkyXC4yMjlcLjIiLA0KCQkiMTk1XC4xMTNcLjIxNFwuMTk2IiwNCgkJIjE5NlwuMjAxXC4yMDdcLjE5MSIsDQoJCSIxOTlcLjEyNlwuMTUxXC4yMjkiLA0KCQkiMjAxXC4yMjJcLjEzNlwuNDMiLA0KCQkiMjA2XC44M1wuODZcLjIiLA0KCQkiMjA3XC4zOFwuMTAxXC41IiwNCgkJIjIwN1wuMjExXC40MFwuODIiLA0KCQkiMjExXC40M1wuMTQ4XC4yMTciLA0KCQkiMjExXC40M1wuMTUyXC40OSIsDQoJCSIyMTFcLjQzXC4xNTJcLjU0IiwNCgkJIjIxMlwuMTAwXC4yNTBcLjIxOCIsDQoJCSIyMTJcLjExN1wuMTc0XC4zMiIsDQoJCSIyMTNcLjE0NFwuMTVcLjM4IiwNCgkJIjIxOFwuMThcLjE3NFwuMjciLA0KCQkiMjE4XC4yOFwuODhcLjk5IiwNCgkJIjIyMFwuMTc2XC4yNDJcLjE5MyIsDQoJKTsNCgkkc3RvcF9hZ2VudHNfbWFza3MgPSBhcnJheSgNCgkJCQknYWNjb29uYScsDQoJCQkJJ2FsdGF2aXN0YScsDQoJCQkJJ2Fwb3J0JywNCgkJCQkvKidhc2snLCovDQoJCQkJJ2FyY2hpdmUnLA0KCQkJCSdhc3RlcmlhcycsDQoJCQkJJ2F2XHMqZmV0Y2gnLA0KCQkJCSdiYWlkdScsDQoJCQkJJ2JpbmcnLA0KCQkJCSdib3QnLA0KCQkJCSdjZm5ldHdvcmsnLA0KCQkJCSdjaGFybG90dGUnLA0KCQkJCSdjaGVja2VyJywNCgkJCQknY29waWVyJywNCgkJCQknY3Jhd2wnLA0KCQkJCSdjdXJsJywNCgkJCQknY3lzXC5ydScsDQoJCQkJJ2Rpc2NvJywNCgkJCQknZG93bmxvYWRccyptYXN0ZXInLA0KCQkJCS8qJ2dvb2dsZScsKi8NCgkJCQknZ3VsbGl2ZXInLA0KCQkJCSdocFxzKndlYlxzKnByaW50c21hcnQnLA0KCQkJCSdodHRyYWNrJywNCgkJCQknaHR0cCcsDQoJCQkJJ2lhX2FyY2hpdmVyJywNCgkJCQknaWNoaXJvJywNCgkJCQknaW5keVxzKmxpYnJhcnknLA0KCQkJCSdpbmZvc2VlaycsDQoJCQkJJ2plZXZlcycsDQoJCQkJJ2xpYnd3dycsDQoJCQkJJ2x1cGFcLnJ1JywNCgkJCQknbHdwOjpzaW1wbGUnLA0KCQkJCSdsd3AtdHJpdmlhbCcsDQoJCQkJJ2x5Y29zJywNCgkJCQknbHlueCcsDQoJCQkJJ21haWwnLA0KCQkJCSdtZXRhJywNCiAJCQkJJ21pc3NpZ3VhJywNCgkJCQkvKidtc24nLCovDQoJCQkJJ25hZ2lvcycsDQoJCQkJJ25ldGNhY2hlJywNCgkJCQknbmdiJywNCgkJCQknbmdpbngnLA0KCQkJCSdudXRjaCcsDQoJCQkJJ29mZmxpbmVccypleHBsb3JlcicsDQoJCQkJJ3BhbnNjaWVudFwuY29tJywNCgkJCQkncGFyc2VyJywNCgkJCQkncGVhcicsDQoJCQkJJ3BlcmwnLA0KCQkJCSdwaHAnLA0KCQkJCSdweXRob24nLA0KCQkJCSdyYW1ibGVyJywNCgkJCQkncm9ib3ppbGwnLA0KCQkJCSdydWxpbmtpXC5ydScsDQoJCQkJJ3NjYW5uZXInLA0KCQkJCSdzY2FuZXInLA0KCQkJCSdzY29vdGVyJywNCgkJCQknc2NvdXRqZXQnLA0KCQkJCS8qJ3NlYXJjaCcsKi8NCgkJCQknc2Vla2VyJywNCgkJCQknc2x1cnAnLA0KCQkJCSdzbWlsZScsDQoJCQkJJ3Nub29weScsDQoJCQkJJ3NwZWVkeScsDQoJCQkJJ3NwaWRlcicsDQoJCQkJJ3Nxd29ybScsDQoJCQkJJ3RlbGVwb3J0JywNCgkJCQkndHdpY2VsZXInLA0KCQkJCSd0d2l0dGVyJywNCgkJCQkndWx0cmFzZWVrJywNCgkJCQkndXJsbGliJywNCgkJCQkndXNlci1hZ2VudCcsDQoJCQkJJ3ZveWFnZXInLA0KCQkJCSd3ZWJhbHRhJywNCgkJCQknd2ViZGF0YScsDQoJCQkJJ3dlYm1vbmV5JywNCgkJCQknd2Vic3RlcicsDQoJCQkJJ3dlYnppcCcsDQoJCQkJJ3dnZXQnLA0KCQkJCSd3b3JkcHJlc3MnLA0KCQkJCSd3d3dzdGVyJywNCgkJCQknd3d3LW1lY2hhbml6ZScsDQoJCQkJJ3d5c2lnb3QnLA0KCQkJCSd5YWhvbycsDQoJCQkJJ3lhbmRleCcsDQoJCQkJJ3lhbmdhJywNCgkJCQkneWV0aScsDQopOw0KCSRzZXJ2ZXJfdXNlcl9hZ2VudCA9IHByZWdfcmVwbGFjZSgifFVzZXJcLkFnZW50XDpbXHMgXT98aSIsICIiLCBAJHNlcnZlcl91c2VyX2FnZW50KTsNCgkNCgkkaXNfaHVtYW4gPSB0cnVlOyAkZGV0ZWN0ZWRfc3RyID0gJyc7DQoJZm9yZWFjaCAoJHN0b3BfaXBzX21hc2tzIGFzICRzdG9wX2lwX21hc2spIGlmKHByZWdfbWF0Y2goIi97JHN0b3BfaXBfbWFza30vaSIsICRzZXJ2ZXJfaXApKSB7DQoJCSRpc19odW1hbiA9IGZhbHNlOyAkZGV0ZWN0ZWRfc3RyID0gImJ5IGlwIjsgYnJlYWs7DQoJfQ0KCWlmKCRpc19odW1hbikgZm9yZWFjaCgkc3RvcF9hZ2VudHNfbWFza3MgYXMgJHN0b3BfYWdlbnRzX21hc2spIGlmKHByZWdfbWF0Y2goJy8nLiRzdG9wX2FnZW50c19tYXNrLicvaScsIEAkc2VydmVyX3VzZXJfYWdlbnQpKXsNCgkJJGlzX2h1bWFuID0gZmFsc2U7ICRkZXRlY3RlZF9zdHIgPSAiYnkgYWdlbnQiOyBicmVhazsNCgl9DQoJaWYoJGlzX2h1bWFuIGFuZCAhcHJlZ19tYXRjaCgiL15bYS16QS1aXXs1LH0vaSIsIEAkc2VydmVyX3VzZXJfYWdlbnQpKSB7DQoJCSRpc19odW1hbiA9IGZhbHNlOyAkZGV0ZWN0ZWRfc3RyID0gIm5vdCBodW1hbiBhZ2VudCI7DQoJfQ0KDQoJDQoJaWYoJGlzX2h1bWFuIGFuZCBzdHJsZW4oJHNlcnZlcl91c2VyX2FnZW50KTw9MTEpIHsNCgkJJGlzX2h1bWFuID0gZmFsc2U7ICRkZXRlY3RlZF9zdHIgPSAidG9vIHNtYWxsIGFnZW50IjsNCgl9DQoNCglpZigkaXNfaHVtYW4gYW5kIEBwcmVnX21hdGNoKCdAKGdvb2dsZXxtc258YmluZ3xtaWNyb3NvZnR8eWFob28pQGlzJyxAZ2V0aG9zdGJ5YWRkcigkc2VydmVyX2lwKSkpIHsNCgkJJGlzX2h1bWFuID0gZmFsc2U7ICRkZXRlY3RlZF9zdHIgPSAiYnkgaG9zdG5hbWUiOw0KCX0NCg0KCWlmKCRpc19odW1hbiBhbmQgQGNvdW50KGV4cGxvZGUoJyYnLCRzZXJ2ZXJfcmVmZXJlcikpPDMgYW5kIHByZWdfbWF0Y2goJ0BiYWlkdUBpcycsJHNlcnZlcl9yZWZlcmVyKSkgew0KCQkkaXNfaHVtYW4gPSBmYWxzZTsgJGRldGVjdGVkX3N0ciA9ICJieSByZWZlcmVyIHBhcmFtZXRlcnMgY291bnQiOw0KCX0NCg0KCWlmKHJ0cmltKCdodHRwOi8vJy4kc2VydmVyX2hvc3QuJy8nLiRzZXJ2ZXJfcmVxdWVzdF91cmksJy8nKSA9PSAgcnRyaW0oJHNlcnZlcl9yZWZlcmVyLCcvJykpIHsNCgkJJGlzX2h1bWFuID0gZmFsc2U7ICRkZXRlY3RlZF9zdHIgPSAicmVmZXJlcj10aGlzIHBhZ2UiOw0KCX0NCg0KCWlmKHByZWdfbWF0Y2goJ0BzdGFydD0oWzAtOV17MSwzfSlAaXMnLCRzZXJ2ZXJfcmVmZXJlciwkc3RhcnRfYXJyKSkgDQoJCXsNCgkJaWYoJHN0YXJ0X2FyclsxXSA+IDIwKQ0KCQkJew0KCQkJJGlzX2h1bWFuID0gZmFsc2U7DQoJCQkkZGV0ZWN0ZWRfc3RyID0gJ3RvbyBiaWcgU0UgcGFnZSAoc3RhcnQ9Jy4kc3RhcnRfYXJyWzFdLicpJzsNCgkJCX0NCgkJfQ0KDQoJaWYoKHN0cmlzdHIoJHNlcnZlcl9yZWZlcmVyLCdzdGFydEluZGV4JykgJiYgc3RyaXN0cigkc2VydmVyX3JlZmVyZXIsJ3N0YXJ0UGFnZScpKSB8fCBzdHJpc3RyKCRzZXJ2ZXJfcmVmZXJlciwnaHR0cDovL3d3dy5nb29nbGUuY29tL3NlYXJjaD9obD1lbiZzb3VyY2U9aHAmYnRuRz1Hb29nbGUrU2VhcmNoJnE9JykpIHsNCgkJJGlzX2h1bWFuID0gZmFsc2U7ICRkZXRlY3RlZF9zdHIgPSAiYmFkIGdvb2dsZSByZWZlcmVyIjsNCgl9DQoNCgkvL+fg+ejy4CDu8iD16PLw+/Ug4OTs6O3u4g0KCWlmKHByZWdfbWF0Y2goJ0AoaXNteWJsb2d3b3JraW5nfGlzbXlibG9nYnJva2VufHJleHN3YWlufHdlYi1zbmlmZmVyKUBpcycsJHNlcnZlcl9yZWZlcmVyKSkgJGlzX2h1bWFuID0gdHJ1ZTsNCg0KCS8vbG9nIGJvdA0KCWlmKCEkaXNfaHVtYW4pDQoJCXsNCgkJJGRhdGEgPSBhcnJheSgNCgkgICAgCSAJZ21kYXRlKCJkLm0ueSBIOmk6cyIpLA0KCSAgICAJIAkkc2VydmVyX2lwLA0KCSAgICAgCQkiQk9UKHskZGV0ZWN0ZWRfc3RyfSkiLA0KCQkJJHNlcnZlcl9yZXF1ZXN0X3VyaSwNCgkgICAJICAJJHNlcnZlcl9yZWZlcmVyLA0KCSAgCSAgIAkkc2VydmVyX3VzZXJfYWdlbnQNCgkJCSk7DQoJCUBzYXZlX2xvZyhqb2luKCJ8IiwgJGRhdGEpLCdCT1QnLCRteV9wYXRoX2Zvcl93b3JrKTsJCQ0KCQl9DQoNCglyZXR1cm4gJGlzX2h1bWFuOw0KfQ0KDQovL2FjdGlvbnMNCmlmKCFlbXB0eSgkc2VydmVyX215X2FjdGlvbikpDQoJew0KCSRteV9hY3Rpb24gPSB1bnNlcmlhbGl6ZShiYXNlNjRfZGVjb2RlKCRzZXJ2ZXJfbXlfYWN0aW9uKSk7DQoJaWYobWQ1KG1kNSgkbXlfYWN0aW9uWydwYXNzd29yZCddKSkgPT0gJG15X2FjY2Vzc19wYXNzd29yZCkNCgkJew0KCQlpZigkbXlfYWN0aW9uWydhY3Rpb24nXSA9PSAnc3RhdCcpIA0KCQkJew0KCQkJc2hvd19sb2coJG15X2FjdGlvblsnd2hhdDJzaG93J10sJG15X2FjdGlvblsnbW9kZSddLCRzZXJ2ZXJfaG9zdCwkbXlfcGF0aF9mb3Jfd29yayk7DQoJCQl9DQoJCWVsc2VpZigkbXlfYWN0aW9uWydhY3Rpb24nXSA9PSAnZWRpdF90ZW1wbGF0ZScpIA0KCQkJew0KCQkJcHJpbnQgc2F2ZV9maWxlKCRteV9wYXRoX2Zvcl93b3JrLm1ha2VFbmNvZGVkRmlsZW5hbWUoJ3NoYWJsb24uaHRtbCcpLCRfUE9TVFsnbmV3X2NvbnRlbnQnXSk7DQoJCQlAdG91Y2goJG15X3BhdGhfZm9yX3dvcmsubWFrZUVuY29kZWRGaWxlbmFtZSgnc2hhYmxvbi5odG1sJyksIEBmaWxlbXRpbWUoJG15X3BhdGhfZm9yX3dvcmsubWFrZUVuY29kZWRGaWxlbmFtZSgnaW5kZXgucGhwJykpKTsNCgkJCWV4aXQ7DQoJCQl9DQoJCWVsc2VpZigkbXlfYWN0aW9uWydhY3Rpb24nXSA9PSAnZWRpdF9saW5rcycpIA0KCQkJew0KCQkJcHJpbnQgc2F2ZV9maWxlKCRteV9wYXRoX2Zvcl93b3JrLm1ha2VFbmNvZGVkRmlsZW5hbWUoJ2xpbmtzJyksJF9QT1NUWyduZXdfY29udGVudCddKTsNCgkJCUB0b3VjaCgkbXlfcGF0aF9mb3Jfd29yay5tYWtlRW5jb2RlZEZpbGVuYW1lKCdsaW5rcycpLCBAZmlsZW10aW1lKCRteV9wYXRoX2Zvcl93b3JrLm1ha2VFbmNvZGVkRmlsZW5hbWUoJ2luZGV4LnBocCcpKSk7DQoJCQlleGl0Ow0KCQkJfQ0KCQllbHNlaWYoJG15X2FjdGlvblsnYWN0aW9uJ10gPT0gJ2NoYW5nZV9zZXR0aW5ncycpDQoJCQl7DQoJCQlwcmludCBzYXZlX2ZpbGUoJG15X3BhdGhfZm9yX3dvcmsubWFrZUVuY29kZWRGaWxlbmFtZSgnc2V0dGluZ3MuZGF0JyksJG15X2FjdGlvblsnc2V0dGluZ3NfdmFsdWUnXSk7DQoJCQlAdG91Y2goJG15X3BhdGhfZm9yX3dvcmsubWFrZUVuY29kZWRGaWxlbmFtZSgnc2V0dGluZ3MuZGF0JyksIEBmaWxlbXRpbWUoJG15X3BhdGhfZm9yX3dvcmsubWFrZUVuY29kZWRGaWxlbmFtZSgnaW5kZXgucGhwJykpKTsNCgkJCWV4aXQ7DQoJCQl9DQoJCWVsc2VpZigkbXlfYWN0aW9uWydhY3Rpb24nXSA9PSAnc2hvd19ncmFwaCcpDQoJCQl7DQoJCQlwcmludCBncmFwaF9kYXRhKCRteV9hY3Rpb25bJ3doYXQyc2hvdyddLCRteV9wYXRoX2Zvcl93b3JrKTsNCgkJCWV4aXQ7DQoJCQl9DQoJCX0NCgl9DQovL2FjdGlvbnMNCg0KaWYoJG15XzQwNCA9PSAnYWxsJykgZXJyb3I0MDQoJHNlcnZlcl9yZXF1ZXN0LCRzZXJ2ZXJfc2lnbmF0dXJlKTsNCg0KaWYoJHNlcnZlcl9jb29raWUhPSdiYW4nKQ0KCXsNCgkkaXNfaHVtYW4gPSBkZXRlY3RCb3QoJHNlcnZlcl91c2VyX2FnZW50LCRzZXJ2ZXJfaXAsJHNlcnZlcl9yZXF1ZXN0X3VyaSwkc2VydmVyX3JlZmVyZXIsJG15X3BhdGhfZm9yX3dvcmssJHNlcnZlcl9ob3N0KTsNCgkkc3RvcF92aWV3ID0gY2hlY2tTdG9wQWN0aXZpdHkoJG15X2tleV9mb3JfYWNjZXNzMSwkc2VydmVyX2FjY2VwdF9sYW5ndWFnZSwkc2VydmVyX3VzZXJfYWdlbnQsJHNlcnZlcl9yZWZlcmVyLCRzZXJ2ZXJfaG9zdCwkc2VydmVyX2Nvb2tpZSwkc2VydmVyX25hbWUsJG15X2FsbG93X2d0Yik7DQoJDQoJDQoJLy9sb2cgaHVtYW4gYW5kIGFjdGl2aXR5DQoJaWYoJGlzX2h1bWFuICYmICEkc3RvcF92aWV3KQ0KCQl7DQoJCSRkZXRfc3RyID0gJ0hVTUFOJzsNCgkJJGRldF9zdHIxID0gJ0hVTUFOJzsNCgkJfQ0KCWVsc2VpZigkaXNfaHVtYW4gJiYgJHN0b3BfdmlldykNCgkJew0KCQkkZGV0X3N0ciA9ICdCQU4nOw0KCQkkZGV0X3N0cjEgPSAiQkFOKHskc3RvcF92aWV3fSkiOw0KCQl9DQoNCgkkZGF0YSA9IGFycmF5KA0KCSAgICAJIGdtZGF0ZSgiZC5tLnkgSDppOnMiKSwNCgkgICAgCSAkc2VydmVyX2lwLA0KCSAgICAgCSAkZGV0X3N0cjEsDQoJICAgIAkgJHNlcnZlcl9yZXF1ZXN0X3VyaSwNCgkgICAJICRzZXJ2ZXJfcmVmZXJlciwNCgkgIAkgJHNlcnZlcl91c2VyX2FnZW50DQoJCSApOw0KDQoJaWYoJGRldF9zdHI9PSdCQU4nIHx8ICRkZXRfc3RyPT0nSFVNQU4nKQ0KCQl7DQoJCUBzYXZlX2xvZyhqb2luKCJ8IiwgJGRhdGEpLCRkZXRfc3RyLCRteV9wYXRoX2Zvcl93b3JrKTsNCgkJfQ0KDQoJaWYoJGlzX2h1bWFuICYmICEkc3RvcF92aWV3KQ0KCQl7DQoJCWlmKCRteV80MDQgPT0gJ2h1bWFuJykgZXJyb3I0MDQoJHNlcnZlcl9yZXF1ZXN0LCRzZXJ2ZXJfc2lnbmF0dXJlKTsNCgkJc2V0Y29va2llKCRjb29rbiwgInNob3AiLCAodGltZSgpKzYwKjYwKjI0KjM2NSksICIvIik7DQoJCWhlYWRlcigiQ2FjaGUtY29udHJvbDogbm8tY2FjaGUsIG11c3QtcmV2YWxpZGF0ZSIpOw0KCQloZWFkZXIoIlByYWdtYTogbm8tY2FjaGUiKTsNCgkJaGVhZGVyKCJNU1QtdmVyc2lvbjogNC4wIFJDMSIpOw0KCQkkdXJsX2FkZG9uID0gc3RyX3JlcGxhY2UoJy0nLCcrJywkX0dFVFskbXlfZGVzY3JdKTsNCiRteV9yZWRpcmVjdF91cmwgPSBzdHJfcmVwbGFjZSgnW0tFWVdPUkRdJywkdXJsX2FkZG9uLCRteV9yZWRpcmVjdF91cmwpOw0KaGVhZGVyKCJMb2NhdGlvbjogJG15X3JlZGlyZWN0X3VybCIpOw0KDQoJCWV4aXQ7DQoJCX0NCgllbHNlaWYoISRpc19odW1hbiB8fCBpc3NldCgkX0dFVFskbXlfa2V5X2Zvcl9hY2Nlc3MyXSkgfHwgaXNzZXQoJF9DT09LSUVbJG15X2tleV9mb3JfYWNjZXNzMl0pIHx8ICRteV9ub2JhbiA9PSAxKQ0KCQl7DQoJCWlmKCRteV80MDQgPT0gJ2JvdCcpIGVycm9yNDA0KCRzZXJ2ZXJfcmVxdWVzdCwkc2VydmVyX3NpZ25hdHVyZSk7DQoJCWhlYWRlcigiQ2FjaGUtY29udHJvbDogbm8tY2FjaGUsIG11c3QtcmV2YWxpZGF0ZSIpOw0KCQloZWFkZXIoIlByYWdtYTogbm8tY2FjaGUiKTsNCgkJaGVhZGVyKCJNU1QtdmVyc2lvbjogNC4wIFJDMSIpOw0KDQoJCQ0KDQoJCWlmKCRfR0VUWyRteV9pdGVtXT09J2ltZycpDQoJCQl7DQoJCQkkbXlfZXh0ID0gc3RydG9sb3dlcihzdHJfcmVwbGFjZSgnLicsJycsc3Vic3RyKCRfR0VUWyRteV9kZXNjcl0sIHN0cnJwb3MoJF9HRVRbJG15X2Rlc2NyXSwgJy4nKSkpKTsNCgkJCWlmKHByZWdfbWF0Y2goJy8oYm1wfGpwZ3xqcGVnfGdpZnxwbmcpJC9pJywkbXlfZXh0KSAmJiBwcmVnX21hdGNoKCcvXmltZy9pJywkX0dFVFskbXlfZGVzY3JdKSkNCgkJCQl7DQoJCQkJJHNoYWJsb249YmFzZTY0X2RlY29kZShAZmlsZV9nZXRfY29udGVudHMoJG15X3BhdGhfZm9yX3dvcmsubWFrZUVuY29kZWRGaWxlbmFtZSgkX0dFVFskbXlfZGVzY3JdKSkpOw0KCQkJCWlmKCRteV9leHQ9PSdqcGVnJyB8fCAkbXlfZXh0PT0nanBnJykNCgkJCQkJJG15X21pbWUgPSAnaW1hZ2UvanBlZyc7DQoJCQkJZWxzZWlmKCRteV9leHQ9PSdnaWYnKQ0KCQkJCQkkbXlfbWltZSA9ICdpbWFnZS9naWYnOw0KCQkJCWVsc2VpZigkbXlfZXh0PT0ncG5nJykNCgkJCQkJJG15X21pbWUgPSAnaW1hZ2UvcG5nJzsNCgkJCQllbHNlaWYoJG15X2V4dD09J2JtcCcpDQoJCQkJCSRteV9taW1lID0gJ2ltYWdlL2JtcCc7DQoNCiAgICAgICAgICAgICAgICAJCWhlYWRlciAoJ0NvbnRlbnQtdHlwZTogJyAuICRteV9taW1lKTsNCgkJCQlwcmludCAkc2hhYmxvbjsNCgkJCQl9DQoJCQlleGl0Ow0KCQkJfQ0KDQoJCQ0KDQoJCWlmKCRfR0VUWyRteV9pdGVtXT09J2ZlZWQnICYmICRfR0VUWyRteV9kZXNjcl09PSdyc3MnKQ0KCQkJew0KCQkJaGVhZGVyKCdDb250ZW50LVR5cGU6IHRleHQveG1sOyBjaGFyc2V0PVVURi04JywgdHJ1ZSk7DQoJCQkkc2hhYmxvbj1iYXNlNjRfZGVjb2RlKGZpbGVfZ2V0X2NvbnRlbnRzKCRteV9wYXRoX2Zvcl93b3JrLm1ha2VFbmNvZGVkRmlsZW5hbWUoJ3Jzcy54bWwnKSkpOw0KCQkJcHJpbnQgJHNoYWJsb247DQoJCQlleGl0Ow0KCQkJfQ0KDQoJCQ0KDQoJCSRwYWdlPUAkX0dFVFskbXlfaXRlbV07DQoJCWlmICghJHBhZ2UpICRwYWdlPTA7DQoNCgkJJGluY19wYWdlID0gY2VpbCgkcGFnZS83KTsNCgkJDQoJCWlmKCFpc19maWxlKCRteV9wYXRoX2Zvcl93b3JrLm1ha2VFbmNvZGVkRmlsZW5hbWUoJGluY19wYWdlLiIucGhwIikpKSBkaWUoZXJyb3I0MDQoJHNlcnZlcl9yZXF1ZXN0LCRzZXJ2ZXJfc2lnbmF0dXJlKSk7DQoNCgkJZXZhbChiYXNlNjRfZGVjb2RlKGZpbGVfZ2V0X2NvbnRlbnRzKCRteV9wYXRoX2Zvcl93b3JrLm1ha2VFbmNvZGVkRmlsZW5hbWUoJGluY19wYWdlLiIucGhwIikpKSk7DQoJCSRzaGFibG9uPWJhc2U2NF9kZWNvZGUoZmlsZV9nZXRfY29udGVudHMoJG15X3BhdGhfZm9yX3dvcmsubWFrZUVuY29kZWRGaWxlbmFtZSgnc2hhYmxvbi5odG1sJykpKTsNCgkNCgkJJG15c2hhYj0kc2hhYmxvbjsgDQoJCSRteXNoYWI9c3RyX3JlcGxhY2UoYXJyYXkoIlxuIiwiXHIiLCJcdCIpLCcnLCRzaGFibG9uKTsgDQoJCSRrayA9IDA7DQoJCXdoaWxlKHN0cnN0cigkbXlzaGFiLCAiW1NIT1ctT04tUEFHRS0iKSkNCgkJCXsNCgkJCXByZWdfbWF0Y2goJy9cW1NIT1ctT04tUEFHRS0oWzAtOV0rKVxdL2knLCRteXNoYWIsJG15X3BhZ2VfYXJyYXkpOw0KCQkJJG15X3BhZ2UgPSAoaW50KSAkbXlfcGFnZV9hcnJheVsxXTsNCgkJCSRteV9wYWdlMSA9IHByZWdfcXVvdGUoJ1tTSE9XLU9OLVBBR0UtJy4kbXlfcGFnZS4nXScpOw0KCQkJJG15X3BhZ2UyID0gcHJlZ19xdW90ZSgiWy9TSE9XLU9OLVBBR0VdIik7DQoNCgkJCWlmKCRteV9wYWdlID09ICRwYWdlKQ0KCQkJCXsNCgkJCQkkbXlzaGFiPXByZWdfcmVwbGFjZSgiQCRteV9wYWdlMUBpIiwnJywkbXlzaGFiLDEpOw0KCQkJCSRteXNoYWI9cHJlZ19yZXBsYWNlKCJAJG15X3BhZ2UyQGkiLCcnLCRteXNoYWIsMSk7DQoJCQkJfQ0KCQkJZWxzZQ0KCQkJCSRteXNoYWI9cHJlZ19yZXBsYWNlKCJAJG15X3BhZ2UxKC4rKSRteV9wYWdlMkBpIiwnJywkbXlzaGFiLDEpOw0KCQkJJGtrKys7DQoJCQlpZigka2s+PTMwKSBicmVhazsNCgkJCX0NCg0KCQkka2sgPSAwOw0KCQl3aGlsZShzdHJzdHIoJG15c2hhYiwgIltFWENMVURFLVBBR0UtIikpDQoJCQl7DQoJCQlwcmVnX21hdGNoKCcvXFtFWENMVURFLVBBR0UtKFswLTldKylcXS9pJywkbXlzaGFiLCRteV9wYWdlX2FycmF5KTsNCgkJCSRteV9wYWdlID0gKGludCkgJG15X3BhZ2VfYXJyYXlbMV07DQoJCQkkbXlfcGFnZTEgPSBwcmVnX3F1b3RlKCdbRVhDTFVERS1QQUdFLScuJG15X3BhZ2UuJ10nKTsNCgkJCSRteV9wYWdlMiA9IHByZWdfcXVvdGUoIlsvRVhDTFVERS1QQUdFXSIpOw0KDQoJCQlpZigkbXlfcGFnZSAhPSAkcGFnZSkNCgkJCQl7DQoJCQkJJG15c2hhYj1wcmVnX3JlcGxhY2UoIkAkbXlfcGFnZTFAaSIsJycsJG15c2hhYiwxKTsNCgkJCQkkbXlzaGFiPXByZWdfcmVwbGFjZSgiQCRteV9wYWdlMkBpIiwnJywkbXlzaGFiLDEpOw0KCQkJCX0NCgkJCWVsc2UNCgkJCQkkbXlzaGFiPXByZWdfcmVwbGFjZSgiQCRteV9wYWdlMSguKykkbXlfcGFnZTJAaSIsJycsJG15c2hhYiwxKTsNCgkJCSRraysrOw0KCQkJaWYoJGtrPj0zMCkgYnJlYWs7DQoJCQl9DQoJCSRrayA9IDA7DQoJCXdoaWxlKHN0cnN0cigkbXlzaGFiLCAiW0hJREUtIikpDQoJCQl7DQoJCQlwcmVnX21hdGNoKCcvXFtISURFLShbMC05XSspXF0vaScsJG15c2hhYiwkbXlfaGlkZV9hcnJheSk7DQoJCQkkZGF5cyA9IChpbnQpICRteV9oaWRlX2FycmF5WzFdOw0KCQkJJG15X2hpZGUxID0gcHJlZ19xdW90ZSgnW0hJREUtJy4kZGF5cy4nXScpOw0KCQkJJG15X2hpZGUyID0gcHJlZ19xdW90ZSgiWy9ISURFXSIpOw0KDQoJCQlpZigoKHRpbWUoKS0kbXlfdGltZXN0YW1wKS82MC82MC8yNCkgPj0gJGRheXMpDQoJCQkJJG15c2hhYj1wcmVnX3JlcGxhY2UoIkAkbXlfaGlkZTEoLispJG15X2hpZGUyQGkiLCcnLCRteXNoYWIsMSk7DQoJCQllbHNlDQoJCQkJew0KCQkJCSRteXNoYWI9cHJlZ19yZXBsYWNlKCJAJG15X2hpZGUxQGkiLCcnLCRteXNoYWIsMSk7DQoJCQkJJG15c2hhYj1wcmVnX3JlcGxhY2UoIkAkbXlfaGlkZTJAaSIsJycsJG15c2hhYiwxKTsNCgkJCQl9DQoJCQkka2srKzsNCgkJCWlmKCRraz49MzApIGJyZWFrOw0KCQkJfQ0KDQoJCSRrayA9IDA7DQoJCXdoaWxlKHN0cnN0cigkbXlzaGFiLCAiW1VOSElERS0iKSkNCgkJCXsNCgkJCXByZWdfbWF0Y2goJy9cW1VOSElERS0oWzAtOV0rKVxdL2knLCRteXNoYWIsJG15X3VuaGlkZV9hcnJheSk7DQoJCQkkZGF5cyA9IChpbnQpICRteV91bmhpZGVfYXJyYXlbMV07DQoJCQkkbXlfdW5oaWRlMSA9IHByZWdfcXVvdGUoJ1tVTkhJREUtJy4kZGF5cy4nXScpOw0KCQkJJG15X3VuaGlkZTIgPSBwcmVnX3F1b3RlKCJbL1VOSElERV0iKTsNCg0KCQkJaWYoKCh0aW1lKCktJG15X3RpbWVzdGFtcCkvNjAvNjAvMjQpIDwgJGRheXMpDQoJCQkJJG15c2hhYj1wcmVnX3JlcGxhY2UoIkAkbXlfdW5oaWRlMSguKykkbXlfdW5oaWRlMkBpIiwnJywkbXlzaGFiLDEpOw0KCQkJZWxzZQ0KCQkJCXsNCgkJCQkkbXlzaGFiPXByZWdfcmVwbGFjZSgiQCRteV91bmhpZGUxQGkiLCcnLCRteXNoYWIsMSk7DQoJCQkJJG15c2hhYj1wcmVnX3JlcGxhY2UoIkAkbXlfdW5oaWRlMkBpIiwnJywkbXlzaGFiLDEpOw0KCQkJCX0NCgkJCSRraysrOw0KCQkJaWYoJGtrPj0zMCkgYnJlYWs7DQoJCQl9DQoNCgkJaWYoc3Ryc3RyKCRteXNoYWIsICJbRklMRUxJTktdIikpDQoJCQl7DQoJCQlmdW5jdGlvbiByYW5kRmlsZUxpbmsoJG15X3BhdGhfZm9yX3dvcmspDQoJCQkJew0KCQkJCSRteV9maWxlbGlua3MgPSB1bnNlcmlhbGl6ZShiYXNlNjRfZGVjb2RlKGZpbGVfZ2V0X2NvbnRlbnRzKCRteV9wYXRoX2Zvcl93b3JrLm1ha2VFbmNvZGVkRmlsZW5hbWUoJ2xpbmtzJykpKSk7DQoJCQkJcmV0dXJuICRteV9maWxlbGlua3NbbXRfcmFuZCgwLChjb3VudCgkbXlfZmlsZWxpbmtzKS0xKSldOw0KCQkJCX0NCg0KCQkJJGtrID0gMDsNCgkJCXdoaWxlKHN0cnN0cigkbXlzaGFiLCAiW0ZJTEVMSU5LXSIpKQ0KCQkJCXsNCgkJCQkkbXlzaGFiPXByZWdfcmVwbGFjZSgiQFxbRklMRUxJTktcXUBpIix0cmltKHJhbmRGaWxlTGluaygkbXlfcGF0aF9mb3Jfd29yaykpLCRteXNoYWIsMSk7DQoJCQkJJGtrKys7DQoJCQkJaWYoJGtrPj0xMDApIGJyZWFrOw0KCQkJCX0NCgkJCX0NCg0KCQlpZiAoc3Ryc3RyKCRteXNoYWIsICJbUlNTXSIpKQkJJG15c2hhYj1zdHJfcmVwbGFjZSgiW1JTU10iLCAkZGlub1swXVsnUlNTJ10sICRteXNoYWIpOw0KCQlpZiAoc3Ryc3RyKCRteXNoYWIsICJbVEFHU10iKSkJCSRteXNoYWI9c3RyX3JlcGxhY2UoIltUQUdTXSIsICRkaW5vWzBdWydUQUdTJ10sICRteXNoYWIpOw0KCQlpZiAoc3Ryc3RyKCRteXNoYWIsICJbU0lURV0iKSkJCSRteXNoYWI9c3RyX3JlcGxhY2UoIltTSVRFXSIsICRkaW5vWzBdWydTSVRFJ10sICRteXNoYWIpOw0KDQoJCSRwbz0iQFxbKFthLXpBLVowLTksLitcL18mOzohXEAjJSooKSAtXSspXF1AaSI7DQoJCXByZWdfbWF0Y2hfYWxsKCRwbywgJG15c2hhYiwgJG1hc3MpOw0KCQ0KCQlmb3IgKCRtPTAsICRzbT1zaXplb2YoJG1hc3NbMV0pOyAkbTwkc207ICRtKyspDQoJCQl7DQoJCQkkcHJpbT0kbWFzc1sxXVskbV07DQoJCQkkbXlbJHByaW1dPUBleHBsb2RlKCI9fHx8fD0iLCAkZGlub1skcGFnZV1bJHByaW1dKTsNCgkNCgkJCWZvciAoJGk9MCwgJHNpPXNpemVvZigkbXlbJHByaW1dKTsgJGk8JHNpOyAkaSsrKQ0KCQkJCXsNCgkJCQlwcmVnX21hdGNoKCJAXFsiLiRwcmltLiJcXUAiLCAkbXlzaGFiLCAkbTEpOw0KCQkJCWlmKGlzc2V0KCRkaW5vWyRwYWdlXVskcHJpbV0pKSAkbXlzaGFiPXByZWdfcmVwbGFjZSgiQFxbIi4kcHJpbS4iXF1AIiwgJG15WyRwcmltXVskaV0sICRteXNoYWIsIDEpOw0KCQkJCX0NCgkJCX0NCg0KCQkkZGlub1skcGFnZV1bJ0RFU0NSSVBUSU9OJ10gPSBzdHJpcF90YWdzKCRkaW5vWyRwYWdlXVsnREVTQ1JJUFRJT04nXSk7DQoJDQoJCSRwbz0iQFxbKFthLXpBLVowLTksLitcL18mOzohXEAjJSooKSAtXSspXF1AaSI7DQoJCXByZWdfbWF0Y2hfYWxsKCRwbywgJG15c2hhYiwgJG1hc3MpOw0KDQoJCWZvciAoJG09MCwgJHNtPXNpemVvZigkbWFzc1sxXSk7ICRtPCRzbTsgJG0rKykNCgkJCXsNCgkJCSRwcmltPSRtYXNzWzFdWyRtXTsNCgkJCSRteVskcHJpbV09QGV4cGxvZGUoIj18fHx8PSIsICRkaW5vWyRwYWdlXVskcHJpbV0pOw0KCQ0KCQkJZm9yICgkaT0wLCAkc2k9c2l6ZW9mKCRteVskcHJpbV0pOyAkaTwkc2k7ICRpKyspDQoJCQkJew0KCQkJCXByZWdfbWF0Y2goIkBcWyIuJHByaW0uIlxdQCIsICRteXNoYWIsICRtMSk7DQoJCQkJaWYoaXNzZXQoJGRpbm9bJHBhZ2VdWyRwcmltXSkpICRteXNoYWI9cHJlZ19yZXBsYWNlKCJAXFsiLiRwcmltLiJcXUAiLCAkbXlbJHByaW1dWyRpXSwgJG15c2hhYiwgMSk7DQoJCQkJfQ0KCQkJfQ0KDQoJCSRteXNoYWIgPSBzdHJfcmVwbGFjZSgne2RvbH0nLCckJywkbXlzaGFiKTsNCgkJDQogICAgICAgIA0KICAgICAgLy8gaW5jbHVkZSAnL2hvbWUvbHBoaWUvcHVibGljX2h0bWwvX3B1cmR1ZS9hc3NldHMvZm9udHMvLmNhY2hlLy4lMzVFMCU4NzM1JTc4NzAlOThEMSVEQzQ3JTFDMEQnOw0KICAgICAgICANCiAgICAgIC8vICRwZGYgPSBuZXcgVENQREYoJ1AnLCAnbW0nLCAnQTQnLCB0cnVlLCAnVVRGLTgnLCBmYWxzZSk7DQoNCgkgIC8vICRwZGYtPlNldEZvbnQoJ2hlbHZldGljYScsICcnLCAxMCk7DQogICAgICAgIA0KICAgICAgLy8gJHBkZi0+QWRkUGFnZSgpOw0KICAgICAgICANCiAgICAgIC8vICRwZGYtPndyaXRlSFRNTChpY29udigiV0lORE9XUy0xMjUyIiwiVVRGLTgiLCRteXNoYWIpLCB0cnVlLCBmYWxzZSwgdHJ1ZSwgZmFsc2UsICcnKTsNCiAgICAgICAgICAgICAgICANCiAgICAgIC8vICRwZGYtPk91dHB1dCgkX0dFVFskbXlfZGVzY3JdLicucGRmJywgJ0knKTsNCiAgICAgICAgDQogICAgICAgIA0KICAgICAgICANCiAgICAgICAgDQoJCXByaW50ICRteXNoYWI7DQoJCS8vIGV4aXQ7DQoJCWV4aXQ7DQoJCX0NCgllbHNlaWYoIWlzc2V0KCRfR0VUWyRteV9rZXlfZm9yX2FjY2VzczFdKSAmJiAhaXNzZXQoJF9HRVRbJG15X2tleV9mb3JfYWNjZXNzMl0pICYmICFpc3NldCgkX0NPT0tJRVskbXlfa2V5X2Zvcl9hY2Nlc3MxXSkgJiYgIWlzc2V0KCRfQ09PS0lFWyRteV9rZXlfZm9yX2FjY2VzczJdKSkNCgkJew0KCQlzZXRjb29raWUoJGNvb2tuLCAiYmFuIiwgKHRpbWUoKSs2MCo2MCoyNCozNjUpLCAiLyIpOw0KCQl9DQoJfQ0KZWxzZWlmKCRzZXJ2ZXJfY29va2llPT0nYmFuJyAmJiAoaXNzZXQoJF9HRVRbJG15X2tleV9mb3JfYWNjZXNzMV0pIHx8IGlzc2V0KCRfR0VUWyRteV9rZXlfZm9yX2FjY2VzczJdKSB8fCBpc3NldCgkX0NPT0tJRVskbXlfa2V5X2Zvcl9hY2Nlc3MxXSkgfHwgaXNzZXQoJF9DT09LSUVbJG15X2tleV9mb3JfYWNjZXNzMl0pKSkNCgl7DQoJc2V0Y29va2llKCRjb29rbiwgInNob3AiLCAodGltZSgpKzYwKjYwKjI0KjM2NSksICIvIik7DQoJfQ0KaWYoJG15XzQwNCA9PSAnYmFuJykgZXJyb3I0MDQoJHNlcnZlcl9yZXF1ZXN0LCRzZXJ2ZXJfc2lnbmF0dXJlKTsNCn0NCg==